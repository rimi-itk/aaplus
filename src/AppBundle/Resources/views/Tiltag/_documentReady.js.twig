
var allSelected = true;
var noneSelected = true;

var selectAll = true;
var selectAllLabel = '{{ 'tiltag.actions.batch_select_all' | trans }}';
var selectNoneLabel = '{{ 'tiltag.actions.batch_select_none' | trans }}';

$('input.js-batch-edit').change(function () {
  var selected = false;
  var allSelected = true;
  $('input.js-batch-edit').each(function (index) {
    if ($(this).is(':checked')) {
      selected = true;
    } else {
      allSelected = false;
    }
  });
  if (selected) {
    $('#appbundle_tiltag_detail_index_batch_edit_button').prop('disabled', false);
  } else {
    $('#appbundle_tiltag_detail_index_batch_edit_button').prop('disabled', true);
  }
  if(allSelected) {
    $('#appbundle_tiltag_detail_index_select_all_button').html(selectNoneLabel);
    selectAll = false;
  } else {
    $('#appbundle_tiltag_detail_index_select_all_button').html(selectAllLabel);
    selectAll = true;
  }
});

$('#appbundle_tiltag_detail_index_select_all_button').click(function() {
  if(selectAll) {
    $('input.js-batch-edit').each(function (index) {
      $(this).prop( "checked", true );
    });
    $(this).html(selectNoneLabel);
    $('#appbundle_tiltag_detail_index_batch_edit_button').prop('disabled', false);
    selectAll = false;
  } else {
    $('input.js-batch-edit').each(function (index) {
      $(this).prop( "checked", false );
    });
    selectAll = true;
    $('#appbundle_tiltag_detail_index_batch_edit_button').prop('disabled', true);
    $(this).html(selectAllLabel);
  }
});